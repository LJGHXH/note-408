# 绪论

## 计算机网络的功能和组成

计算机网络是相互连接的、自制的计算机组合。从物理组成来看，计算机网络包括阿硬件、软件、协议。

## 计算机网络的组成

核心部分：路由器，网络；边缘部分：主机（端系统）。  
边缘部分有两种通信方式：客户-服务器方式（C/S），对等方式（P2P）。  
核心部分要向边缘部分的主机提供连通器，由路由器实现分组交换和路由选择，任务是转发收到的分组。

通信服务可分为：面向连接服务、无连接服务。  
**面向连接服务**必须建立连接、连接维护、释放连接（TCP），协议复杂，通信效率不高。  
**面向无连接服务**的每个分组都携带完整的目的节点地址，传输过程不经过建立连接、链接维护、释放连接，传输时可能出现乱序、重复、丢失。可靠性不好，但协议简单、通信效率高。

**可靠服务**是具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地。**不可靠服务**只尽量争取、可靠地传送，不能保证数据正确，一种尽力而为的服务。

**有应答服务**指接收方收到数据后向发送方给出相应答应（文件传输服务）。**无应答服务**则不自动给出应答。

只有TCP和PPP是**面向连接服务**，只有TCP是**可靠**的，只有TCP和CSMA/CA是**有应答的**。

## 计算机网络的特点

**连通性**：让两个用户之间实现连接，但不需要知道物理位置。  
**共享性**：资源共享（信息、软件、硬件）。  

## 计算机网络的功能

**数据通信**：最近本、最重要的功能，包括连接控制、传输控制、差错控制、流量控制、路由选择、多路复用等。  
**资源共享**：数据资源、软件资源、硬件资源。  
**分布式处理**：部分任务传送给网络中的其它计算机系统进行处理。  
**信息综合处理**：分散各地计算机的数据进行集中处理或分级处理。

## 计算机网络分类

**按交换技术分类**：电路交换、报文交换、分组交换。  
**按传输介质分类**：有线网络、无线网络。  
**按拓扑结构分类**：星型网络、总线型网络、环形网络、网状型结构。  **按分布范围分类**：广域网、局域网、城域网、个人区域网。  

## 计算机网络的性能指标

- 速率：数据率dataRate或比特率bitRate，单位有b/s, kb/s, Mb/s, Gb/s等
- 带宽：频带宽度单位为赫（千赫、兆赫等）
- 延迟时延：一段到另一端所需要的时间间隔。`总时延=发送时延+传播时延+处理时延+排队时延`(通常后二者时间很短，不考虑)
  - 发送时延：数据帧从节点进入到传输媒体所需时间，`发送时延=数据帧长度/发射速度`
  - 传播时延：电磁波在信道中需要传播一定距离而花费的时间，`传播时延=信道长度/信号在信道上的传播速率`
  - 处理时延：交换节点为存储转发而进行操作的耗时
  - 排队时延：节点缓存队列中分组排队所经历的耗时
- 时延带宽积：`时延带宽积=传播时延×带宽`，以比特b为单位计算两点距离
- 吞吐量：单位时间内通过某个网络或接口、信道的数据量

## 计算机体系结构【重点】

为了减少计算机网的复杂性，采用分层设计方法（按照信息流动过程将网络的整体功能分解为一个个功能层，不同计算机的同等功能层之间采用相同协议，相邻功能层之间通过接口进行信息交换。

- **实体**：任何可以发送或接收信息的硬件或软件进程
- **对等实体**：同一层的实体叫做对等实体
- **对等层**：不同计算机上同一层
- **相邻层**：相同计算机上的相邻层次
- n层实体实现的服务为n+1层所利用。在此情况下，n层被称为服务提供者，n+1层为服务用户

计算机网络的体系结构是计算机网络的各层机器协议的集合。体系结构就是该计算机网络机器部件锁应完成的功能的精确定义。  
实现是遵循该体系结构的前提下用何种硬件或软件完成这些功能的为题。体系结构是抽象的，实现则是具体的，是真正在运行的计算机硬件和软件。

### 体系结构的三要素

- **协议**：计算机网络中数据交换必须遵守的事先约定好的规则。
  - 协议三要素：语法（数据与控制信息的结构或格式），语义（需要发出的控制信息），同步（事件实现顺序）
- **服务**：下层为紧邻的上层提供功能调用，为下一层提供服务
  - 分为面向连接服务与无连接服务，可靠服务与不可靠服务，有应答和无应答服务
- **接口**：同一节点内相邻两层交换信息的连接点

协议是“水平的”（控制对等实体之间通信等规则），服务是“垂直的”（下层向上层通过层间接口提供服务）。

### 网络模型

OSI/RM为七层，TCP/IP为四层。教学通常用五层模型（自上而下：应用层、运输侧、网络层、数据链路层、物理层）

#### ISO/OSU参考模型

由国际标准化组织ISO提出的网络体系结构模型，又称为系统互联参考模型OSI/RM，通常称为OSI参考模型。  
OSI/RM分为七层，自上而下为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。（应表会传网数物。应表会：高层协议，传网数物：低层协议）  

- **应用层**——数据：为用户程序提供网络服务（HTPP，FTP，TELNET，SMTP等）
- **表示层**：将不同数据格式转换成通用格式（ASCII，JPEG，MPEG等，加解密，解压缩）
- **会话层**session：会话的建立、管理、终止通信主机会话，为表示层提供服务（访问次序的安排）
- **传输层**——段：两台主机间建立端到端连接，实现可靠传输（TCP、UDP分别为面向连接和面向无连接协议）
- **网络层**——数据包：主机之间的连接、路径选择以及基于IP的寻址（三层交换机、路由器工作在此层）
- **数据链路层**——帧：提供数据在物理链路的传输、物理寻址、网络拓扑、错误检测（立案层交换机、网桥工作于此层设备）
- **物理层**——比特流：高低电平，数据传输速度，传输距离，物理连接器等（HUB，中继器等线路属于此层）

#### TCP/IP模型

从上至下：应用层、运输层、网际层、网络接口层

- **应用层**：提供系统与用户的接口
  - 文件传输、域名解析、电子邮件服务等
  - FTP、SMTP、POP3、HTTP
- **传输层**：负责主机中两个进程的通信。传输单元为报文段（TCP）或用户数据包（UDP）
  - 为端到端连接提供不可靠的传输服务 和 流量控制差错功能
  - TCP、UDP
- **网际层**（网络层、IP层）：报文封装成分组，选择适当路由令分组能够交付到目的主机
  - 为传输层提供服务，路由选择，分组转发
  - ICMP、ARP、RARP、IP、IGMP
- **网络接口层**：协作IP数据在已有网络介质上传输的协议。更像ARP协议

## 补充

- 广域网和局域网的差异主要在于所提供的服务不同
- RTT：往返传播时延
- 物理层不参与数据封装工作
- OSI数据链路层可以提供网络的接口，提供物理寻址、差错校验、流量控制
- 传输层提供拥塞控制功能
- TCP/IP的网络层提供无连接不可靠的数据报服务
- OSI中，流量控制的是234567层，提供建立、维护、拆除端到端连接的是传输层，网络中路由的功能是网络层，主机进程之间的数据传送是传输层，为网络层实体提供数据发送和接受是数据链路层
